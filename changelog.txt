# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

## [1.2.22] - 2026-01-23

### Added

- Integration test `tests/test_proxy.py` to verify proxy forwarding functionality between two nodes.
- Helper script `tests/run_test_node.py` for launching test bank nodes with custom configurations.

### Changed

- Updated `AB`, `AD`, and `AW` commands to support `ip:port` syntax in account IDs for testing purposes.

## [1.2.21] - 2026-01-23

### Changed

- Modified `AD`, `AW`, and `AB` commands to support proxying to remote banks.
- Integrated `ProxyClient` and `is_local_ip` into command logic.
- Added unit tests for proxy integration in `tests/protocol/test_proxy_integration.py`.

## [1.2.20] - 2026-01-23

### Added

- `network/proxy_client.py` with `ProxyClient` class to communicate with other bank nodes.
- `send_command` method to open connections, send commands, and retrieve responses.
- Unit tests for `ProxyClient` (success, timeout, connection errors).

## [1.2.19] - 2026-01-23

### Added

- `utils/ip_helper.py` with `is_local_ip` function for IP detection.
- Unit tests for `ip_helper`.

## [1.2.18] - 2026-01-23

### Added

- `tests/__init__.py` to make the tests directory a package.
- `tests/test_protocol_integration.py` for full banking flow integration testing.
- Verified all protocol commands (BC, AC, AD, AW, AB, AR, BA, BN) working together.

## [1.2.17] - 2026-01-23

### Added

- Verification script `tests/verify_step_27.py` to automate manual testing steps.
- Validated Basic Bank Node functionality (Commands: BC, AC, AD, AB) and persistence.

## [1.2.16] - 2026-01-23

### Added

- `main.py` entry point to wire all components (Config, Logger, Persistence, Bank, Server).
- Graceful shutdown handling on KeyboardInterrupt.

## [1.2.15] - 2026-01-23

### Added

- `TcpServer` class to listen for connections and spawn `ClientHandler` threads.
- Unit tests for `TcpServer`.

## [1.2.14] - 2026-01-23

### Added

- `ClientHandler` class to manage individual client connections.
- Unit tests for `ClientHandler`.

## [1.2.13] - 2026-01-23

### Added

- `BNCommand` class to implement Bank Number command.
- Unit tests for `BNCommand`.

## [1.2.12] - 2026-01-23

### Added

- `BACommand` class to implement Bank Amount command.
- Unit tests for `BACommand`.

## [1.2.11] - 2026-01-23

### Added

- `ARCommand` class to implement Account Remove command.
- Unit tests for `ARCommand`.

## [1.2.10] - 2026-01-23

### Added

- `ABCommand` class to implement Account Balance command.
- Unit tests for `ABCommand`.

## [1.2.9] - 2026-01-23

### Added

- `AWCommand` class to implement Account Withdrawal command.
- Unit tests for `AWCommand`.

## [1.2.8] - 2026-01-23

### Added

- `ADCommand` class to implement Account Deposit command.
- Unit tests for `ADCommand`.

## [1.2.7] - 2026-01-23

### Added

- `ACCommand` class to implement Account Creation command.
- Unit tests for `ACCommand`.

## [1.2.6] - 2026-01-23

### Added

- `BCCommand` class to implement the Bank Code command (returns IP).
- Unit tests for `BCCommand`.

## [1.2.5] - 2026-01-23

### Added

- `CommandParser` class to parse raw strings into command objects.
- Unit tests for `CommandParser`.

## [1.2.4] - 2026-01-23

### Added

- `CommandFactory` class to instantiate commands based on protocol strings.
- Unit tests for `CommandFactory` and command registration.

## [1.2.3] - 2026-01-23

### Added

- `BaseCommand` abstract class implementing the Template Method pattern for command execution.
- Unit tests for `BaseCommand` logic and error handling.

## [1.2.2] - 2026-01-23

### Added

- `Validator` class for protocol data validation.
- Unit tests for `Validator`.

## [1.2.1] - 2026-01-23

### Added

- `CommandType` Enum to define protocol constants and valid commands.
- Unit tests for `CommandType`.

## [1.2.0] - 2026-01-23

### Added

- Thread safety mechanism to `Bank` class using `RLock`.
- Stress tests for verifying concurrent account creation and transactions.

### Changed

- Protected `create_account`, `deposit`, and `withdraw` methods in `Bank` class with thread locks.

## [1.1.2] - 2026-01-22

### Added

- Observer pattern implementation in `Bank` class (Subject).
- `AutoSaver` class (Observer) for automatic persistence on transactions.
- Integration tests for Observer pattern.

### Changed

- `Bank` class now notifies observers instead of calling `save()` directly.

## [1.1.1] - 2026-01-22

### Added

- Initialize project structure and add changelog.
- Implement Configuration Manager (Singleton pattern).
- Add unit tests for Configuration Manager.
- Implement Centralized Logger (Singleton pattern).
- Add unit tests for Logger.
- Implement Bank Account Entity (Thread-safe).
- Add unit tests for Bank Account Entity.
- Implement Persistence Interface (Strategy Pattern).
- Add unit tests for Persistence Interface.
- Implement JSON Persistence Strategy.
- Add unit tests for JSON Persistence.
- Implement Account Repository (Repository Pattern).
- Add unit tests for Account Repository.
- Implement Bank Facade (Singleton Pattern).
- Add unit tests for Bank Facade.


